---
import { siteConfig } from "@/data/site.config";
import "../../styles/global.css";
import { ClientRouter } from "astro:transitions";
import { join } from "node:path";
import { AstroFont } from "astro-font";

export interface Props {
  title: string;
  description?: string;
  ogImage?: string | undefined;
  articleDate?: string | undefined;
  viewTransition: boolean;
}

const {
  title,
  description = siteConfig.seo.description,
  ogImage,
  articleDate,
  viewTransition = true,
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const socialImageURL = new URL(
  ogImage ? ogImage : "/open-graph.webp",
  Astro.url
).href;

const titleSeparator = "•";

const siteTitle = `${title} ${titleSeparator} ${siteConfig.companyName}`;



const googleAnalyticsId = import.meta.env.VITE_GOOGLE_ANALYTICS_ID;
---

<head>
  <!-- Global Metadata -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- Favicon -->
  <!-- <link rel="icon" type="image/png" href="/favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/favicon/favicon.svg" />
  <link rel="shortcut icon" href="/favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="SIMTEC" />
  <link rel="manifest" href="/favicon/site.webmanifest" /> -->

  <!-- Sitemap -->
  <link rel="sitemap" href="/sitemap-index.xml" />

  <!-- Canonical URL -->
  <link rel="canonical" href={canonicalURL} />

  <!-- Primary Meta Tags -->
  <title>{siteTitle}</title>

  <!-- ViewTransitions  -->
  {viewTransition && <ClientRouter  />}

  <!-- SEO -->
  <meta name="title" content={siteTitle} />
  <meta name="description" content={description} />
  <meta name="author" content={siteConfig.companyName} />
  <!-- Keywords -->
  <meta
    name="keywords"
    content="motores para puertas automáticas, instalación de sistemas de seguridad, instalación de puertas automáticas, mantenimiento de sistemas de seguridad, reparación de cámaras de seguridad, puertas automáticas, porteros eléctricos inteligentes, cercas eléctricas para seguridad, cámaras de vigilancia, automatización de hogares, dvr para sistemas de seguridad"
  />
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content={articleDate ? "article" : "website"} />
  <meta property="og:url" content={Astro.url} />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={socialImageURL} />
  {
    articleDate && (
      <>
        <meta property="article:author" content={siteConfig.author} />
        <meta property="article:published_time" content={articleDate} />
      </>
    )
  }

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content={Astro.url} />
  <meta property="twitter:title" content={title} />
  <meta property="twitter:description" content={description} />
  <meta property="twitter:image" content={socialImageURL} />

  <!-- <script
    type="text/partytown"
    async
    src={`https://www.googletagmanager.com/gtag/js?id=${googleAnalyticsId}`}
  ></script> -->
  <!-- <script is:inline type="text/partytown">
    window.dataLayer = window.dataLayer || [];
    window.gtag = function gtag() {
      dataLayer.push(arguments);
    };
    window.gtag("js", new Date());

    window.gtag("config", "G-RWBNLLD0HN");
  </script> -->

  <AstroFont
    config={[
      {
        name: "Cinzel",
        src: [
          {
            style: "normal",
            path: join(
              process.cwd(),
              "public",
              "fonts",
              "Cinzel-VariableFont.ttf"
            ),
          },
        ],
        preload: false,
        display: "swap",
        selector: "body",
        fallback: "sans-serif",
      },
      {
        name: "Raleway",
        src: [
          {
            style: "normal",
            path: join(
              process.cwd(),
              "public",
              "fonts",
              "Raleway-VariableFont.ttf"
            ),
          },
        ],
        preload: false,
        display: "swap",
        selector: "body",
        fallback: "sans-serif",
      },
    ]}
  />
</head>
